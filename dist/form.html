<form id="wizard-form">
    <div class="alert alert-success" role="alert" data-bind="visible: mode() == 1" style="display: none;">
    Ihre Offerteanfrage wurde erfolgreich erstellt.
    </div>
    <div class="alert alert-danger" role="alert" data-bind="visible: mode() == 2" style="display: none;">
      Bei der Offertanfrage ist ein Fehler aufgetreten. Bitte versuchen sie es erneut.
    </div>
    <div class="alert alert-warning" role="alert" data-bind="visible: mode() == 3" style="display: none;">
      Ihre Anfrage wird vorbereitet. Bitte haben sie ein wenig geduld...
    </div>
    <div class="alert alert-warning" role="alert" data-bind="visible: mode() == 4" style="display: none;">
      Bitte füllen sie alle markierten Felder korrekt aus!
    </div>
    <div>
        <!-- Wizard -->
        <div id="wizard" class="wizard"
             data-bind="foreach: steps, attr: {'data-current-step': currentWizardStepId() + 1, 'data-steps': steps().length}">
          <p class="step" data-bind="text:name, click:function() {$parent.currentStep($data)}"></p>
        </div>

        <!-- Master Byline -->
        <div class="masterByline">
          <div class="bylineItem" data-bind="visible: form.totalPrice() > 0" style="display: none;">voraussichtlicher Preis: <span data-bind="text: readablePrice(form.totalPrice())"></span></div>
          <div class="bylineItem" data-bind="visible: form.totalMaxPersons() > 0" style="display: none;">Personen: <span data-bind="text: form.totalMinPersons"></span> - <span data-bind="text: form.totalMaxPersons"></span></div>
          <div class="bylineItem" data-bind="visible: form.totalSquareMeters() > 0" style="display: none;">Gesamtfläche: <span data-bind="text: form.totalSquareMeters"></span>m³</div>
        </div>
        <!-- Zelt -->
        <div data-bind="template: { name: 'step1-template', data: steps()[0] }"></div>
        <script type="text/html" id="step1-template">
            <div class="wizardStepView" data-bind="visible: isVisible" style="display: none;">
              <h2>Meine Zelte</h2>
              <div class="addButton" data-bind="click: openSelectTent">
                <i class="fa fa-plus-circle"></i> Zelt hinzufügen
              </div>
              <ul class="listing" data-bind="foreach: wizardForm.selectedTents">
                <li>
                  <div data-bind="template: { name: 'remove-row-template' }" />
                  <div class="infos">
                    <div class="title">
                      <span data-bind="text: minPersons"></span> - <span data-bind="text: maxPersons"></span> Personen<span data-bind="text: $root.readablePrice(price)" class="price"></span>
                    </div>
                    <div class="byline">
                      Länge: <span data-bind="text: length"></span>m | Breite: <span data-bind="text: width"></span>m | Fläche: <span data-bind="text: squareMeter"></span>m³
                    </div>
                  </div>
                </li>
              </ul>
              <div data-bind="visible: wizardForm.selectedTents().length">
                <div class="total">
                  <span>Total Zelte inkl. MwSt.</span><span class="price" data-bind="text: $root.readablePrice(wizardForm.totalTentsPrice())"></span>
                </div>
                <div class="info">
                <span>Total Personen</span><span class="price" data-bind="text: $root.readablePersons(wizardForm.totalMinPersons(), wizardForm.totalMaxPersons())">400 - 800 Personen</span>
                </div>
                <div class="info">
                </div>
              </div>
              <!-- <div data-bind="template: { name: 'navigation-controls-template' }" />       -->
            </div>
            <div data-bind="template: { name: 'select-tents-template', data: selectTentsSubStep }"></div>
        </script>

        <!-- Zubehör -->
        <div data-bind="template: { name: 'step2-template', data: steps()[1] }"></div>
        <script type="text/html" id="step2-template">
            <div class="wizardStepView" data-bind="visible: isVisible" style="display: none;">
              <h2>Zubehör</h2>
              <div class="addButton" data-bind="click: openSelectEquipment">
                <i class="fa fa-plus-circle"></i> Zubehör hinzufügen
              </div>
              <ul class="listing" data-bind="foreach: wizardForm.selectedEquipments">
                <li>
                  <div data-bind="template: { name: 'remove-row-template' }" />
                  <div class="infos">
                    <div class="title">
                      <span data-bind="text: title"></span><span data-bind="text: $root.readablePrice(price)" class="price">
                    </div>
                    <div class="byline">
                      <span data-bind="text: description"></span>
                    </div>
                  </div>
                </li>
              </ul>
              <div data-bind="visible: wizardForm.selectedEquipments().length">
                <div class="total">
                  <span>Total Equipment inkl. MwSt.</span><span class="price" data-bind="text: $root.readablePrice(wizardForm.totalEquipmentsPrice())"></span>
                </div>
                <div class="info">
                </div>
              </div>
            </div>
            <div data-bind="template: { name: 'select-equipment-template', data: selectEquipmentSubStep }"></div>
        </script>

        <!-- Anlass -->
        <div data-bind="template: { name: 'event-template', data: steps()[2] }"></div>
        <script type="text/html" id="event-template">
          <div class="wizardStepView" data-bind="visible: isVisible" style="display: none;">
          <h2>Anlass</h2>
          <div class="eventForm">
            <label for="eventname">Anlass Name *</label>
            <div class="alert alert-warning error-msg" style="display: none;"></div>
            <input id="eventname" data-bind="value: $root.form.eventname" type="text" required></select>

            <label for="startdate">Startdatum</label>
            <div class="alert alert-warning error-msg" style="display: none;"></div>
            <input id="startdate" data-bind="value: $root.form.startdate" type="date" required></select>

            <label for="eventdays">Anzahl Tage</label>
            <div class="alert alert-warning error-msg" style="display: none;"></div>
            <input id="eventdays" data-bind="value: $root.form.eventdays" type="number" min="1" required></select>

            <label for="eventlocation">Ort des Anlasses</label>
            <div class="alert alert-warning error-msg" style="display: none;"></div>
            <input id="eventlocation" data-bind="value: $root.form.eventlocation" type="text" required>

          </div>
          </div>
        </script>

        <!-- Kontakt -->
        <div data-bind="template: { name: 'contact-template', data: steps()[3] }"></div>
        <script type="text/html" id="contact-template">
            <div class="wizardStepView" data-bind="visible: isVisible" style="display: none;">
              <h2>Kontakt</h2>
              <div class="contactForm">
                <label for="salutation">Anrede *</label>
                <div class="alert alert-warning error-msg" style="display: none;"></div>
                <select id="salutation" data-bind="options: availableGenders" required></select>

                <label for="firstname">Vorname *</label>
                <div class="alert alert-warning error-msg" style="display: none;"></div>
                <input id="firstname" data-bind="value: $root.form.firstname" type="text" required="required">

                <label for="lastname">Nachname *</label>
                <div class="alert alert-warning error-msg" style="display: none;"></div>
                <input id="lastname" data-bind="value: $root.form.lastname" type="text" required="required">

                <label for="company">Firma</label>
                <div class="alert alert-warning error-msg" style="display: none;"></div>
                <input id="company" data-bind="value: $root.form.company" type="text" 

                <label for="street">Strasse *</label>
                <div class="alert alert-warning error-msg" style="display: none;"></div>
                <input id="street" data-bind="value: $root.form.street" type="text" required>

                <label for="streetnr">Nr. *</label>
                <div class="alert alert-warning error-msg" style="display: none;"></div>
                <input id="streetnr" data-bind="value: $root.form.streetnr" type="text"  required>

                <label for="zip">PLZ *</label>
                <div class="alert alert-warning error-msg" style="display: none;"></div>
                <input id="zip" data-bind="value: $root.form.zip" type="number" required>

                 <label for="location">Ort *</label>
                 <div class="alert alert-warning error-msg" style="display: none;"></div>
                <input id="location" data-bind="value: $root.form.location" type="text" required>
                
                <label for="email">E-Mail *</label>
                <div class="alert alert-warning error-msg" style="display: none;"></div>
                <input id="email" data-bind="value: $root.form.email" type="email" required>

                <label for="phone">Telefon *</label>
                <div class="alert alert-warning error-msg" style="display: none;"></div>
                <input id="phone" data-bind="value: $root.form.phone" type="tel" required>
              </div>
            </div>
        </script>

        <!-- Zelt hinzufügen -->
        <script type="text/html" id="select-tents-template">
            <div class="wizardStepView wizardStepSubView" data-bind="visible: isVisible" style="display: none;">
              <h2>Zeltauswahl</h2>
              <ul class="listing selectable" data-bind="foreach: parent.wizardForm.tents">
                  <li tab-index="10" data-bind="click: $parent.selectTent.bind($parent)">
                    <div class="title">
                      <span data-bind="text: minPersons"></span> - <span data-bind="text: maxPersons"></span> Personen<span data-bind="text: $root.readablePrice(price)" class="price"></span>
                    </div>
                    <div class="byline">
                      Länge: <span data-bind="text: length"></span>m | Breite: <span data-bind="text: width"></span>m | Fläche: <span data-bind="text: squareMeter"></span>m³
                    </div>
                  </li>
              </ul>
            </div>
         </script>

        <!-- Zubehör hinzufügen -->
        <script type="text/html" id="select-equipment-template">
            <div class="wizardStepView wizardStepSubView" data-bind="visible: isVisible" style="display: none;">
              <h2>Zubehörauswahl</h2>
              <ul class="listing selectable" data-bind="foreach: parent.wizardForm.equipments">
                  <li data-bind="click: $parent.selectEquipment.bind($parent)">
                    <div class="title">
                      <span data-bind="text: title"></span><span data-bind="text: $root.readablePrice(price)" class="price">
                    </div>
                    <div class="byline">
                      <span data-bind="text: description"></span>
                    </div>
                  </li>
              </ul>
            </div>
         </script>

         <!-- Navigation Controls -->
         <div class="navigationControls">
          <button data-bind="click: previous, visible: showPrevButton" style="display: none;">Zurück</button>
          <input class="right highlight" type="submit" class="right" data-bind="click: send, visible: showSendButton" value="Offerte anfordern" style="display: none;"/>
          <button class="right highlight" data-bind="click: next, visible: showNextButton" style="display: none;">Weiter</button>
        </div>
    </div>
</form>
<script type="text/html" id="remove-row-template">
  <div class="remove" data-bind="click: $parent.removeDataRow.bind($parent)">
      <i class="fa fa-times"></i>
  </div>
</script>
